<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d" d:DesignWidth="550" d:DesignHeight="600"
        x:Class="Front_End.Components.CreateInvoiceModal"
        Title="Create Invoice"
        Width="550" Height="600"
        WindowStartupLocation="CenterOwner"
        CanResize="False"
        Background="Transparent"
        TransparencyLevelHint="Transparent"
        ExtendClientAreaToDecorationsHint="True"
        SystemDecorations="None">

    <!-- Modal Backdrop with Blur Effect -->
    <Panel>
        <!-- Semi-transparent backdrop -->
        <Border Background="#80000000" />
        
        <!-- Modal Content Card -->
        <Border Background="White"
                CornerRadius="16"
                MaxWidth="512"
                HorizontalAlignment="Center"
                VerticalAlignment="Center"
                Margin="16">
            <Border.Effect>
                <DropShadowEffect Color="Black" 
                                  Opacity="0.25" 
                                  BlurRadius="40" 
                                  OffsetX="0" 
                                  OffsetY="10"/>
            </Border.Effect>
            
            <StackPanel>
                
                <!-- Header -->
                <Border Padding="24" 
                        BorderBrush="#F3F4F6" 
                        BorderThickness="0,0,0,1">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        
                        <TextBlock Grid.Column="0" 
                                   Text="Create New Invoice" 
                                   FontSize="20" 
                                   FontWeight="Bold" 
                                   Foreground="#111827"
                                   VerticalAlignment="Center"/>
                        
                        <!-- Close Button -->
                        <Button Grid.Column="1" 
                                Name="CloseButton"
                                Width="40" 
                                Height="40"
                                Background="Transparent"
                                CornerRadius="20"
                                Padding="0"
                                Click="OnCloseClick">
                            <Button.Styles>
                                <Style Selector="Button:pointerover">
                                    <Setter Property="Background" Value="#F3F4F6"/>
                                </Style>
                            </Button.Styles>
                            <!-- X Icon -->
                            <Path Data="M6 18L18 6M6 6l12 12" 
                                  Stroke="#9CA3AF" 
                                  StrokeThickness="2"
                                  StrokeLineCap="Round"
                                  Width="20" 
                                  Height="20"
                                  Stretch="Uniform"/>
                        </Button>
                    </Grid>
                </Border>
                
                <!-- Form Content -->
                <Border Padding="24">
                    <StackPanel Spacing="16">
                        
                        <!-- Service/Task Name with AI Suggest -->
                        <StackPanel>
                            <TextBlock Text="Service/Task Name" 
                                       FontSize="14" 
                                       FontWeight="SemiBold" 
                                       Foreground="#374151"
                                       Margin="0,0,0,4"/>
                            
                            <Grid ColumnDefinitions="*,Auto">
                                <!-- Input Field -->
                                <TextBox Grid.Column="0"
                                         Name="TaskInput"
                                         Watermark="e.g., Logo Design for Acme Corp"
                                         Padding="16,8"
                                         FontSize="14"
                                         CornerRadius="12"
                                         BorderBrush="#E5E7EB"
                                         BorderThickness="1"
                                         Margin="0,0,8,0"/>
                                
                                <!-- AI Suggest Button -->
                                <Button Grid.Column="1"
                                        Name="AiSuggestButton"
                                        Padding="16,8"
                                        CornerRadius="12"
                                        Click="OnAiSuggestClick">
                                    <Button.Background>
                                        <LinearGradientBrush StartPoint="0%,0%" EndPoint="100%,0%">
                                            <GradientStop Color="#2563EB" Offset="0"/>
                                            <GradientStop Color="#4F46E5" Offset="1"/>
                                        </LinearGradientBrush>
                                    </Button.Background>
                                    <StackPanel Orientation="Horizontal" Spacing="8">
                                        <!-- Sparkles Icon or Loader -->
                                        <Path Name="AiIcon"
                                              Data="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z" 
                                              Stroke="White" 
                                              StrokeThickness="2"
                                              StrokeLineCap="Round"
                                              Width="18" 
                                              Height="18"
                                              Stretch="Uniform"/>
                                        
                                        <TextBlock Text="AI Suggest" 
                                                   Foreground="White"
                                                   FontSize="14"
                                                   FontWeight="SemiBold"
                                                   VerticalAlignment="Center"/>
                                    </StackPanel>
                                </Button>
                            </Grid>
                        </StackPanel>
                        
                        <!-- Invoice Description -->
                        <StackPanel>
                            <TextBlock Text="Invoice Description" 
                                       FontSize="14" 
                                       FontWeight="SemiBold" 
                                       Foreground="#374151"
                                       Margin="0,0,0,4"/>
                            
                            <TextBox Name="DescriptionInput"
                                     AcceptsReturn="True"
                                     TextWrapping="Wrap"
                                     Height="100"
                                     Watermark="Detailed description of services rendered..."
                                     Padding="16,8"
                                     FontSize="14"
                                     CornerRadius="12"
                                     BorderBrush="#E5E7EB"
                                     BorderThickness="1"/>
                        </StackPanel>
                        
                        <!-- Amount and Due Date -->
                        <Grid ColumnDefinitions="*,16,*">
                            
                            <!-- Amount -->
                            <StackPanel Grid.Column="0">
                                <TextBlock Text="Amount ($)" 
                                           FontSize="14" 
                                           FontWeight="SemiBold" 
                                           Foreground="#374151"
                                           Margin="0,0,0,4"/>
                                
                                <TextBox Name="AmountInput"
                                         Watermark="0.00"
                                         Padding="16,8"
                                         FontSize="14"
                                         CornerRadius="12"
                                         BorderBrush="#E5E7EB"
                                         BorderThickness="1"/>
                            </StackPanel>
                            
                            <!-- Due Date -->
                            <StackPanel Grid.Column="2">
                                <TextBlock Text="Due Date" 
                                           FontSize="14" 
                                           FontWeight="SemiBold" 
                                           Foreground="#374151"
                                           Margin="0,0,0,4"/>
                                
                                <DatePicker Name="DueDateInput"
                                            Padding="16,8"
                                            FontSize="14"
                                            CornerRadius="12"
                                            BorderBrush="#E5E7EB"
                                            BorderThickness="1"
                                            HorizontalAlignment="Stretch"/>
                            </StackPanel>
                        </Grid>
                    </StackPanel>
                </Border>
                
                <!-- Footer Actions -->
                <Border Background="#F9FAFB" 
                        Padding="24"
                        BorderBrush="#F3F4F6"
                        BorderThickness="0,1,0,0">
                    <StackPanel Orientation="Horizontal" 
                                HorizontalAlignment="Right"
                                Spacing="12">
                        
                        <!-- Cancel Button -->
                        <Button Name="CancelButton"
                                Padding="24,8"
                                Background="Transparent"
                                BorderThickness="0"
                                Click="OnCloseClick">
                            <TextBlock Text="Cancel" 
                                       FontSize="14" 
                                       FontWeight="SemiBold" 
                                       Foreground="#6B7280"/>
                        </Button>
                        
                        <!-- Create Invoice Button -->
                        <Button Name="CreateButton"
                                Padding="32,8"
                                Background="#5454F4"
                                CornerRadius="12"
                                Click="OnCreateInvoiceClick">
                            <Button.Styles>
                                <Style Selector="Button:pointerover">
                                    <Setter Property="Background" Value="#2563EB"/>
                                </Style>
                            </Button.Styles>
                            <TextBlock Text="Create Invoice" 
                                       FontSize="14" 
                                       FontWeight="SemiBold" 
                                       Foreground="White"/>
                        </Button>
                    </StackPanel>
                </Border>
            </StackPanel>
        </Border>
    </Panel>
</Window>
