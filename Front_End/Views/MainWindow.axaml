<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="using:Front_End.Components"
        xmlns:views="using:Front_End.Views"
        mc:Ignorable="d" d:DesignWidth="1920" d:DesignHeight="1080"
        x:Class="Front_End.Views.MainWindow"
        Title="Invoice Dashboard"
        MinWidth="1200"
        MinHeight="700"
        Background="#F9FAFB">

    <Window.Styles>
        <Style Selector="Button.primary">
            <Setter Property="Background" Value="#10B981"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="CornerRadius" Value="12"/>
            <Setter Property="Padding" Value="20,12"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="BorderThickness" Value="0"/>
        </Style>
        
        <Style Selector="Button.primary:pointerover">
            <Setter Property="Background" Value="#059669"/>
        </Style>
        
        <Style Selector="Button.secondary">
            <Setter Property="Background" Value="White"/>
            <Setter Property="Foreground" Value="#374151"/>
            <Setter Property="BorderBrush" Value="#E5E7EB"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="CornerRadius" Value="12"/>
            <Setter Property="Padding" Value="16,10"/>
            <Setter Property="FontWeight" Value="Medium"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Cursor" Value="Hand"/>
        </Style>
        
        <Style Selector="Button.secondary:pointerover">
            <Setter Property="Background" Value="#F9FAFB"/>
        </Style>
    </Window.Styles>

    <Panel>
        <!-- Main Layout -->
        <Grid RowDefinitions="Auto,*">

            <!-- Navbar Component (shown only on Dashboard) -->
            <local:Navbar Grid.Row="0" Name="MainNavbar"/>

            <!-- Content Area - Switches between Dashboard and Invoice -->
            <Panel Grid.Row="1" Name="ContentArea">
                
                <!-- Dashboard Content -->
                <ScrollViewer Name="DashboardContent" HorizontalScrollBarVisibility="Disabled">
                    <StackPanel Margin="64,40,64,48" HorizontalAlignment="Stretch">
                        
                        <!-- Header Section -->
                        <Grid Margin="0,0,0,32" HorizontalAlignment="Stretch">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            
                            <!-- Left: Title and Subtitle -->
                            <StackPanel Grid.Column="0" VerticalAlignment="Center" HorizontalAlignment="Left">
                                <TextBlock Text="Overview" 
                                           FontSize="28" 
                                           FontWeight="Bold" 
                                           Foreground="#111827"/>
                                <TextBlock Text="Here is your stats for today." 
                                           FontSize="14" 
                                           Foreground="#9CA3AF" 
                                           Margin="0,6,0,0"/>
                            </StackPanel>
                            
                            <!-- Right: Action Buttons -->
                            <StackPanel Grid.Column="1" 
                                        Orientation="Horizontal" 
                                        Spacing="12"
                                        VerticalAlignment="Center" 
                                        HorizontalAlignment="Right">
                                
                                <!-- Calendar/Date Filter Button -->
                                <Button Classes="secondary">
                                    <StackPanel Orientation="Horizontal" Spacing="8">
                                        <TextBlock Text="Last 30 days" 
                                                   VerticalAlignment="Center"
                                                   FontSize="14"
                                                   FontWeight="Medium"/>
                                        <!-- Dropdown Arrow -->
                                        <Path Data="M7 10l5 5 5-5z" 
                                              Fill="#9CA3AF" 
                                              Width="16" 
                                              Height="16"
                                              Stretch="Uniform"
                                              VerticalAlignment="Center"/>
                                    </StackPanel>
                                </Button>
                                
                                <!-- Create Invoice Button -->
                                <Button Classes="primary" 
                                        Name="CreateInvoiceButton"
                                        Click="OnCreateInvoiceClick">
                                    <StackPanel Orientation="Horizontal" Spacing="8">
                                        <!-- Plus Icon -->
                                        <TextBlock Text="+" 
                                                   FontSize="18"
                                                   FontWeight="Bold"
                                                   VerticalAlignment="Center"
                                                   Margin="0,-2,0,0"/>
                                        <TextBlock Text="Create Invoice" 
                                                   VerticalAlignment="Center"
                                                   FontSize="14"
                                                   FontWeight="SemiBold"/>
                                    </StackPanel>
                                </Button>
                            </StackPanel>
                        </Grid>

                        <!-- Stats Grid - Responsive with uniform stretch -->
                        <Grid Margin="0,0,0,32" Name="StatsGrid" HorizontalAlignment="Stretch">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" MinWidth="200"/>
                                <ColumnDefinition Width="24"/>
                                <ColumnDefinition Width="*" MinWidth="200"/>
                                <ColumnDefinition Width="24"/>
                                <ColumnDefinition Width="*" MinWidth="200"/>
                                <ColumnDefinition Width="24"/>
                                <ColumnDefinition Width="*" MinWidth="200"/>
                            </Grid.ColumnDefinitions>
                            
                            <!-- Clients Card -->
                            <local:StatCard Grid.Column="0" 
                                            Name="ClientsCard"
                                            HorizontalAlignment="Stretch"/>
                            
                            <!-- Invoices Card -->
                            <local:StatCard Grid.Column="2" 
                                            Name="InvoicesCard"
                                            HorizontalAlignment="Stretch"/>
                            
                            <!-- Invoiced Card -->
                            <local:StatCard Grid.Column="4" 
                                            Name="InvoicedCard"
                                            HorizontalAlignment="Stretch"/>
                            
                            <!-- Paid Card -->
                            <local:StatCard Grid.Column="6" 
                                            Name="PaidCard"
                                            HorizontalAlignment="Stretch"/>
                        </Grid>

                        <!-- Two Column Section: Transactions and Projects - Responsive -->
                        <Grid ColumnDefinitions="*,32,*" HorizontalAlignment="Stretch">

                            <!-- Recent Transactions -->
                            <Border Grid.Column="0" 
                                    Background="White" 
                                    CornerRadius="20" 
                                    BorderBrush="#F3F4F6" 
                                    BorderThickness="1" 
                                    Padding="28"
                                    MinWidth="400">
                                <StackPanel>
                                    <TextBlock Text="Recent Transactions" 
                                               FontSize="18" 
                                               FontWeight="Bold" 
                                               Foreground="#111827" 
                                               Margin="0,0,0,24"/>
                                    <StackPanel Name="TransactionsPanel" Spacing="20">
                                        <!-- Transaction items will be populated from code-behind -->
                                    </StackPanel>
                                </StackPanel>
                            </Border>

                            <!-- Recent Projects -->
                            <Border Grid.Column="2" 
                                    Background="White" 
                                    CornerRadius="20" 
                                    BorderBrush="#F3F4F6" 
                                    BorderThickness="1" 
                                    Padding="28"
                                    MinWidth="400">
                                <StackPanel>
                                    <TextBlock Text="Recent Projects" 
                                               FontSize="18" 
                                               FontWeight="Bold" 
                                               Foreground="#111827" 
                                               Margin="0,0,0,24"/>
                                    <StackPanel Name="ProjectsPanel" Spacing="20">
                                        <!-- Project items will be populated from code-behind -->
                                    </StackPanel>
                                </StackPanel>
                            </Border>
                        </Grid>

                    </StackPanel>
                </ScrollViewer>

                <!-- Invoice View (hidden by default) -->
                <views:InvoiceView Name="InvoiceContent" IsVisible="False"/>
                
            </Panel>
        </Grid>

        <!-- Sidebar Overlay (initially hidden) -->
        <Panel Name="SidebarOverlay" IsVisible="False">
            <!-- Dark Overlay Background -->
            <Border Name="OverlayBackground" 
                    Background="#80000000" 
                    HorizontalAlignment="Stretch" 
                    VerticalAlignment="Stretch"/>
            
            <!-- Sidebar -->
            <local:Sidebar Name="MainSidebar" 
                           HorizontalAlignment="Left" 
                           VerticalAlignment="Stretch"/>
        </Panel>
    </Panel>
</Window>
